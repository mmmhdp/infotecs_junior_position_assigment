# Задание 2

## Описание

Требуется реализовать **кастомный аллокатор памяти на языке C** (использование C++ не допускается).

Необходимо реализовать функции:

- `malloc`
- `free`

## Функциональные ограничения

- Запрашивается выделение памяти **только двух размеров**:
  - **15 байт**
  - **180 байт**
- Необходимо обратить особое внимание на:
  - быстродействие
  - эффективность работы с памятью

## Требования к архитектуре

- Код должен корректно работать на:
  - **8-битной**
  - **16-битной**
  - **32-битной** архитектурах

## Требования к коду

- Реализация должна быть выполнена **строго на языке C**
- Использование стандартного `malloc/free` внутри реализации не допускается (если не оговорено отдельно)

## Требования к сдаче задания

Готовое задание должно быть передано:

- либо ответным письмом в виде архива **zip / tgz**
- либо в виде **GitHub-репозитория**
  - ссылка может быть передана через **docx / pdf**

## Требования к структуре проекта

- Проект должен находиться в **отдельной папке**
- В папке **не должно быть мусора**, включая:
  - неиспользуемые исходные файлы
  - неиспользуемые ресурсы
  - промежуточные файлы сборки

# Описание реализации кастомного аллокатора памяти

Реализован **кастомный аллокатор памяти на языке C**, поддерживающий фиксированные размеры блоков. Аллокатор предназначен для эффективного управления небольшими объектами и минимизации накладных расходов на системные вызовы памяти.  

## Особенности

- **Фиксированные размеры блоков:** 15 байт и 180 байт.
- **Повторное использование памяти:** освобождённые блоки возвращаются в свободный список и могут быть выделены повторно.
- **Буферная организация:** память выделяется большими буферами, которые разбиваются на блоки.
- **Абстракция низкоуровневого выделения:** поддержка `malloc` (NAIVE_BOOTSTRAP) или `mmap` (POSIX_BOOTSTRAP) в зависимости от платформы.
- **Проверка корректности:** опциональное обнаружение двойного освобождения и проверка принадлежности блока.
- **Совместимость с C/C++:** функции `my_malloc` и `my_free` могут использоваться из C и C++.

## Общая схема работы

1. **Структуры аллокатора:**
   - `allocator_t` — основной аллокатор, хранит метаданные и списки свободных блоков.
   - `allocator_buffer_t` — буфер, содержащий несколько блоков.
   - `allocator_block_t` — отдельный блок памяти.  

2. **Выделение памяти (`my_malloc`):**
   - Выбор соответствующего пула по размеру (15 или 180 байт).
   - Если свободных блоков нет — создаётся новый буфер.
   - Блоки выдаются из списка свободных блоков.  

3. **Освобождение памяти (`my_free`):**
   - Возврат блока в свободный список.
   - Проверка, что указатель принадлежит аллокатору; при ошибке — завершение программы.  

4. **Тестирование:**
   - Юнит-тесты реализованы с использованием **Google Test**.
   - Проверяются: выделение, освобождение, повторное использование блоков и обработка некорректных указателей.
